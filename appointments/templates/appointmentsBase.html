{% extends 'specialistTemplate.html' %} 
{% load static %} 
{% block link %}

<link rel="stylesheet" href="{% static 'appointments.css' %}" />
<link rel="stylesheet" href="https://uicdn.toast.com/tui-calendar/latest/tui-calendar.css">
<script src="https://uicdn.toast.com/tui-calendar/latest/tui-calendar.js"></script>



{% endblock link %} 
{% block content %}

<div class="modal fade" id="eventModal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title">Create New Appointment</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <form method="post">
          {% csrf_token %}
        <div class="modal-body" id="modalBody">
          
            {{ form.as_p }}        
        </div>
        <div class="modal-footer">
            <button type="submit" class="btn btn-primary">Confirm</button>
          
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </form>
    </div>
</div>

  
</div>


<div class="main-container">
  <div class="side-container">
    <div class="side-item">
      <a href="{% url 'appointmentCalendar' %}">
        <button class="btn side-btn">
          Calendar
          <div class="selector-container">
            <i class="fa fa-circle-chevron-right"></i>        
          </div>
        </button>
      </a>
      
    </div>
    <div class="side-item">
      <a href="{% url 'appointmentCreate' %}">
        <button class="btn side-btn">
          Create an Appointment
        </button>
      </a>
    </div>
    <div class="side-item">
      <a href="{% url 'appointmentCreate' %}">
        <button class="btn side-btn">
          Appointment History
        </button>
      </a>
    </div>  
  </div>
  <div class="content-container">
      {% block appointmentContent %} 
      {% endblock appointmentContent %}
  </div>
</div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

<script>
  const createAppointmentButton = document.getElementById('createAppointment');
      const eventModal = document.getElementById('eventModal');

      createAppointmentButton.addEventListener('click', function() {
        $('#eventModal').modal('show');
      });
  
  
</script>

<!-- <script>
  const events = {{ scheduledAppointments|safe }};
  console.log(events);
</script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const calendar = new tui.Calendar(document.getElementById("calendar"), {
      defaultView: "month", // Initial view (e.g., 'week', 'month', 'day')
      useCreationPopup: true, // Enable event creation popup// Configuration options go here
    });

    // Add events to the calendar
    events.forEach(function (event) {
      calendar.createSchedules([
        {
          id: event.id,
          calendarId: "1",
          title: event.specialist,
          category: "time",
          start: event.start,
          end: event.end,
          body: event.note,
        },
      ]);
    });
  });
</script> -->

<!-- <script>
  document.addEventListener("DOMContentLoaded", function () {
    fetch("/appointments/calendar")
      .then((response) => response.json())
      .then((data) => {
        console.log(data)
        // Now, the 'data' variable holds the parsed JSON response
        const events = data;

        const calendar = new tui.Calendar(document.getElementById("calendar"), {
          defaultView: "month", // Initial view (e.g., 'week', 'month', 'day')
          useCreationPopup: true, // Enable event creation popup// Configuration options go here
        });

        // Add events to the calendar
        events.forEach(function (event) {
          calendar.createSchedules([
            {
              id: event.id,
              calendarId: "1",
              title: event.specialist,
              category: "time",
              start: event.start,
              end: event.end,
              body: event.note,
            },
          ]);
        });
      })
      .catch((error) => console.error("Error:", error));
  });
</script> -->
<!-- 
<script>
    document.addEventListener('DOMContentLoaded', function () {
        fetch('/appointments/calendar/')
            .then(response => {
                const contentType = response.headers.get('Content-Type');
                if (contentType && contentType.indexOf('application/json') !== -1) {
                    return response.json();  // It's JSON, parse it
                } else {
                    return response.text();  // It's HTML, retrieve it as text
                }
            })
            .then(data => {
                if (typeof data === 'object') {
                    // JSON data
                    const events = data;
                    // Handle JSON data as needed
                } else if (typeof data === 'string') {
                    // HTML content
                    // Insert the HTML content into a specific element
                    document.getElementById('calendar-container').innerHTML = data;
                    console.log(data.context);
                }
            })
            .catch(error => console.error('Error:', error));
    });
</script> -->



{% endblock content %}
